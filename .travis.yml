---
sudo: required
language: python
python:
  - "3.6"
env:
  global:
    - ROLE_NAME: githubfoam.onos
  matrix:
    # - MOLECULE_DISTRO: centos74
    - MOLECULE_DISTRO: ubuntu1804
services:
  - docker
jobs:
  include:
    - stage: molecule test
      install:
        - sudo apt-get -qq update
      before_script:
        - sudo apt-get install -y python-pip libssl-dev
        - pip install molecule
        - pip install docker-py
        - pip install pyOpenSSL
      script:
        - molecule --debug test
    # - stage: molecule lint
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule lint
    # - stage: molecule destroy
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule destroy
    # - stage: molecule dependency
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule dependency
    # - stage: molecule syntax
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule syntax
    # - stage: molecule create
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule create
    # - stage: molecule prepare
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule prepare
    # - stage: molecule converge
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule converge
    # - stage: molecule idempotence
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule idempotence
    # - stage: molecule side_effect
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule side_effect
    # - stage: molecule verify
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule verify
    # - stage: molecule destroy
    #   install:
    #     - sudo apt-get -qq update
    #   before_script:
    #     - sudo apt-get install -y python-pip libssl-dev
    #     - sudo pip install molecule docker-py
    #   script:
    #     - molecule destroy
notifications:
  email:
    on_success: never
    on_failure: always
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
